<!DOCTYPE html>
<html lang="zh_TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customize GPT</title>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-primary: #0d0d0d;
            --text-secondary: #8e8ea0;
            --input-bg: #f4f4f4;
            --avatar-user: #10a37f;
            /* ChatGPT Greenish */
            --avatar-ai: #000000;
            --border-color: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: var(--bg-color);
            color: var(--text-primary);
        }

        /* 頂部導航列模擬 */
        .header {
            background-color: var(--bg-color);
            color: var(--text-primary);
            padding: 10px 20px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 44px;
        }

        .header h1 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #444;
            margin: 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .header h1:hover {
            background-color: #f0f0f0;
            border-radius: 8px;
        }

        /* 聊天區域 */
        .chat-container {
            flex: 1;
            padding-top: 20px;
            padding-bottom: 40px;
            overflow-y: auto;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            /* 讓內容置中 */
        }

        /* 空狀態 */
        .empty-state {
            text-align: center;
            margin-top: 20vh;
        }

        .empty-state h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .empty-state .logo-icon {
            width: 50px;
            height: 50px;
            margin-bottom: 15px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 50%;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        /* 訊息列樣式 - 串流式佈局 */
        .message {
            display: flex;
            width: 100%;
            max-width: 768px;
            /* ChatGPT 標準寬度 */
            padding: 0 1rem;
            margin-bottom: 24px;
            box-sizing: border-box;
            gap: 16px;
            /* 頭像與文字的間距 */
        }

        /* 移除原本的左右對齊邏輯，統一靠左 */
        .message.user,
        .message.ai {
            justify-content: flex-start;
        }

        .avatar {
            width: 30px;
            height: 30px;
            min-width: 30px;
            /* 防止壓縮 */
            border-radius: 50%;
            /* 改為圓角矩形或圓形 */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
        }

        /* 調整頭像顏色 */
        .avatar.user {
            background-color: #cccccc;
            /* 使用者通常是灰色或圖片 */
            color: #fff;
        }

        .avatar.ai {
            background-color: var(--avatar-user);
            /* AI 用綠色 */
            color: white;
            /* 如果有 SVG logo 更好，這裡用文字代替 */
        }

        .message-content {
            max-width: 100%;
            padding: 0;
            /* 移除氣泡內距 */
            border-radius: 0;
            background-color: transparent;
            /* 移除氣泡背景 */
            box-shadow: none;
            /* 移除陰影 */
            line-height: 1.6;
            font-size: 1rem;
            color: var(--text-primary);
            margin-top: 2px;
            /* 微調對齊 */
        }

        /* 使用者名稱 (可選，這裡用 CSS 偽元素模擬) */
        .message.user .message-content::before {
            content: "You";
            display: block;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 4px;
        }

        .message.ai .message-content::before {
            content: "ChatGPT";
            display: block;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 4px;
        }


        /* 輸入區域容器 */
        .input-container {
            padding: 0 1rem 2rem 1rem;
            background-color: transparent;
            background-image: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1) 20%);
            display: flex;
            justify-content: center;
            position: relative;
            z-index: 10;
        }

        .input-warpper {
            width: 100%;
            max-width: 768px;
            position: relative;
            background-color: var(--input-bg);
            border-radius: 26px;
            /* 膠囊形狀 */
            border: 1px solid transparent;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: flex-end;
            padding: 8px 10px;
            transition: border-color 0.2s;
        }

        .input-warpper:focus-within {
            border-color: #d9d9e3;
            background-color: white;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }

        .input-box {
            width: 100%;
            padding: 8px 10px 8px 16px;
            border: none;
            background: transparent;
            resize: none;
            font-family: inherit;
            font-size: 1rem;
            line-height: 1.5;
            max-height: 200px;
            outline: none;
            color: var(--text-primary);
        }

        .input-box::placeholder {
            color: #8e8ea0;
        }

        .send-button {
            background-color: #e5e5e5;
            /* 禁用狀態顏色 */
            border: none;
            color: white;
            padding: 6px;
            border-radius: 50%;
            /* 圓形按鈕 */
            cursor: default;
            margin-bottom: 2px;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
        }

        /* 當輸入框有內容時的按鈕樣式 (需要 JS 配合，這裡先寫好樣式) */
        .send-button.active {
            background-color: black;
            cursor: pointer;
        }

        .send-button svg {
            width: 16px;
            height: 16px;
        }

        /* 底部免責聲明 */
        .footer-text {
            text-align: center;
            font-size: 0.75rem;
            color: #999;
            margin-top: 8px;
            position: absolute;
            bottom: 5px;
            width: 100%;
            left: 0;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>Customize GPT <span style="font-size: 0.8em; color: #999; margin-left: 5px;">2025</span></h1>
    </div>

    <div class="chat-container" id="chatContainer">
        <div class="empty-state">
            <div style="display: flex; justify-content: center;">
                <div class="logo-icon">
                    <svg width="30" height="30" viewBox="0 0 41 41" fill="none" xmlns="http://www.w3.org/2000/svg"
                        stroke="#000" stroke-width="2">
                        <path
                            d="M37.5324 16.8707C37.9808 15.5241 38.1363 14.0974 37.9865 12.6855C37.8368 11.2736 37.3857 9.91238 36.6669 8.6997C35.9481 7.48701 34.9806 6.45398 33.8344 5.67568C32.6881 4.89737 31.3923 4.39343 30.0409 4.20059C28.6895 4.00774 27.3168 4.1309 26.0224 4.56108C24.728 4.99126 23.5435 5.71769 22.5552 6.68748C21.5669 7.65727 20.8 8.84659 20.3106 10.1697C19.8211 11.4928 19.6212 12.9157 19.7258 14.3352L19.7634 14.757L19.5317 14.6225C18.2327 13.8696 16.7454 13.4876 15.2443 13.5218C13.7432 13.556 12.2905 14.0049 11.0569 14.8152C9.82333 15.6255 8.86065 16.7634 8.2828 18.0945C7.70495 19.4255 7.53603 20.8943 7.79599 22.3259L8.03816 23.6593L7.02705 22.8687C5.92723 22.0084 4.56947 21.4937 3.17294 21.3831C1.77641 21.2725 0.422735 21.5723 -0.738029 22.2505L0.261971 23.9745C1.10912 23.4801 2.09689 23.2613 3.11585 23.3421C4.13481 23.4228 5.12547 23.7984 5.92789 24.4262L9.54425 27.2536L9.19896 25.3524C8.91754 23.8016 9.10058 22.2104 9.72659 20.7684C10.3526 19.3265 11.3955 18.0938 12.7319 17.2159C14.0683 16.3381 15.642 15.8518 17.2682 15.8148C18.8944 15.7777 20.5056 16.1915 21.9128 17.0075L26.3364 19.5732L26.3364 10.6358C26.3362 9.09995 25.8778 7.59858 25.0142 6.30578C24.1506 5.01297 22.9169 3.98188 21.4554 3.33235C19.9939 2.68282 18.3653 2.44158 16.7583 2.63669C15.1513 2.8318 13.6309 3.45524 12.3732 4.43477C11.1154 5.41429 10.1719 6.70997 9.65215 8.17027C9.13236 9.63056 9.05792 11.196 9.43753 12.6845C9.81714 14.1731 10.6352 15.5236 11.7956 16.5777C12.956 17.6318 14.4099 18.346 15.9866 18.6365L15.9866 20.6695C13.6749 20.2443 11.5434 19.1973 9.84196 17.6521C8.14048 16.1068 6.94119 14.127 6.38466 11.9448C5.82813 9.76263 5.93725 7.46775 6.69919 5.32454C7.46114 3.18133 8.84422 1.28218 10.6879 -0.153712C12.5316 -1.58961 14.7606 -2.50357 17.1165 -2.78959C19.4724 -3.07561 21.8599 -2.72198 24.0026 -1.76978C26.1453 -0.817578 27.954 -0.30569 29.22 -2.1997C30.4859 -4.0937 31.1578 -6.29471 31.1578 -8.54637L31.1578 -13.0151L32.9248 -11.9904Z"
                            fill="currentColor" />
                    </svg>
                </div>
            </div>
            <h2>歡迎使用 Customize GPT</h2>
            <p>請在下方輸入訊息開始對話。</p>
        </div>
    </div>

    <div class="input-container">
        <div class="input-warpper">
            <textarea class="input-box" id="messageInput" placeholder="傳送訊息給 Customize GPT" rows="1"></textarea>
            <button class="send-button" id="sendButton" disabled>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 2L11 13M22 21-7 20-4-9-9-4 20-7z" />
                </svg>
            </button>
        </div>
        <div class="footer-text">ChatGPT can make mistakes. Check important info.</div>
    </div>

    <script>
        const chatContainer = document.getElementById('chatContainer');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');

        // 自動調整輸入框高度與按鈕狀態
        messageInput.addEventListener('input', function () {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';

            // 控制按鈕顏色 (有文字時變黑)
            if (this.value.trim() !== '') {
                sendButton.removeAttribute('disabled');
                sendButton.classList.add('active');
                sendButton.style.backgroundColor = 'black';
            } else {
                sendButton.setAttribute('disabled', 'true');
                sendButton.classList.remove('active');
                sendButton.style.backgroundColor = '#e5e5e5';
            }
        });

        messageInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        });

        sendButton.addEventListener('click', function () {
            sendMessage();
        });

        // 新增訊息到聊天容器
        function addMessage(text, role) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;

            const avatar = document.createElement('div');
            avatar.className = `avatar ${role}`;
            // 這裡可以換成 SVG 圖標，現在先用文字簡化
            avatar.textContent = role === 'user' ? 'U' : 'AI';

            // 如果是 AI，嘗試換成 GPT 圖示 (文字替換)
            if (role === 'ai') {
                avatar.innerHTML = `<svg width="20" height="20" viewBox="0 0 41 41" fill="none" stroke="white" stroke-width="3"><path d="M37.5324 16.8707C37.9808 15.5241 38.1363 14.0974 37.9865 12.6855C37.8368 11.2736 37.3857 9.91238 36.6669 8.6997C35.9481 7.48701 34.9806 6.45398 33.8344 5.67568C32.6881 4.89737 31.3923 4.39343 30.0409 4.20059C28.6895 4.00774 27.3168 4.1309 26.0224 4.56108C24.728 4.99126 23.5435 5.71769 22.5552 6.68748C21.5669 7.65727 20.8 8.84659 20.3106 10.1697C19.8211 11.4928 19.6212 12.9157 19.7258 14.3352L19.7634 14.757L19.5317 14.6225C18.2327 13.8696 16.7454 13.4876 15.2443 13.5218C13.7432 13.556 12.2905 14.0049 11.0569 14.8152C9.82333 15.6255 8.86065 16.7634 8.2828 18.0945C7.70495 19.4255 7.53603 20.8943 7.79599 22.3259L8.03816 23.6593L7.02705 22.8687C5.92723 22.0084 4.56947 21.4937 3.17294 21.3831C1.77641 21.2725 0.422735 21.5723 -0.738029 22.2505L0.261971 23.9745C1.10912 23.4801 2.09689 23.2613 3.11585 23.3421C4.13481 23.4228 5.12547 23.7984 5.92789 24.4262L9.54425 27.2536L9.19896 25.3524C8.91754 23.8016 9.10058 22.2104 9.72659 20.7684C10.3526 19.3265 11.3955 18.0938 12.7319 17.2159C14.0683 16.3381 15.642 15.8518 17.2682 15.8148C18.8944 15.7777 20.5056 16.1915 21.9128 17.0075L26.3364 19.5732L26.3364 10.6358C26.3362 9.09995 25.8778 7.59858 25.0142 6.30578C24.1506 5.01297 22.9169 3.98188 21.4554 3.33235C19.9939 2.68282 18.3653 2.44158 16.7583 2.63669C15.1513 2.8318 13.6309 3.45524 12.3732 4.43477C11.1154 5.41429 10.1719 6.70997 9.65215 8.17027C9.13236 9.63056 9.05792 11.196 9.43753 12.6845C9.81714 14.1731 10.6352 15.5236 11.7956 16.5777C12.956 17.6318 14.4099 18.346 15.9866 18.6365L15.9866 20.6695C13.6749 20.2443 11.5434 19.1973 9.84196 17.6521C8.14048 16.1068 6.94119 14.127 6.38466 11.9448C5.82813 9.76263 5.93725 7.46775 6.69919 5.32454C7.46114 3.18133 8.84422 1.28218 10.6879 -0.153712C12.5316 -1.58961 14.7606 -2.50357 17.1165 -2.78959C19.4724 -3.07561 21.8599 -2.72198 24.0026 -1.76978C26.1453 -0.817578 27.954 -0.30569 29.22 -2.1997C30.4859 -4.0937 31.1578 -6.29471 31.1578 -8.54637L31.1578 -13.0151L32.9248 -11.9904Z"/></svg>`;
            }

            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = text;

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            chatContainer.appendChild(messageDiv);

            // 自動滾動到底部
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function sendMessage() {
            // 取出使用者輸入的訊息
            const message = messageInput.value.trim();

            if (message === '')
                return;

            // 移除空的狀態框
            const emptyState = chatContainer.querySelector('.empty-state');
            if (emptyState) {
                emptyState.remove();
            }

            // 建立使用者訊息的元素
            addMessage(message, 'user');

            // 清空輸入框並重置高度
            messageInput.value = '';
            messageInput.style.height = 'auto';

            // 重置按鈕狀態
            sendButton.setAttribute('disabled', 'true');
            sendButton.classList.remove('active');
            sendButton.style.backgroundColor = '#e5e5e5';

            // // 模擬AI回覆
            // setTimeout(() => {
            //     addMessage('你好,現在我還沒上線,請你等我有上線的時候再來跟我聊天喔~!!', 'ai');
            // }, 1000);

            // 呼叫後端API取得AI回覆
            fetch('/callAI?message=' + encodeURIComponent(message))
                .then(response => response.json())
                .then(data => {
                    addMessage(data.message, 'assistant');
                })
                .catch(error => {
                    console.error('Error:', error);
                    addMessage('抱歉，無法取得回覆。請稍後再試。', 'assistant');
                });
        }
    </script>

</body>

</html>